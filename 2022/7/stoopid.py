print(sum(filter(lambda x:x<=100000,map(int,__import__('os').popen('mkdir -p r/r;(cd r/r;'+''.join((l[0]=='$')*f"{l[1:].replace('cd ','mkdir -p ')};{l[1:]};"+(lambda b:b[0].isnumeric()*f"truncate -s{b[0]} {b[1]};")(l.split())for l in open(0).read().strip().split('\n')[1:])+');find r -type d -exec du -sb {} +|cut -f1').read().strip().split('\n')))))
